# TASK-2.1.10: Extend `CartDrawer` props to support remove and quantity updates

**Section**: 2.1 Cart + Ordering Flow
**Subsection**: 2.1.10
**Task ID**: TASK-2.1.10

## Description

Extend the `CartDrawer` component props to accept callbacks for removing items and updating quantities. This prepares the drawer for interactive cart management features that will be implemented in the next task.

**Reference Implementation**: 
- `components/order/CartDrawer.tsx` (lines 1-108)
- `components/order/useCart.ts` (for `removeItem` and `updateQuantity` methods)

## Current State

- `CartDrawer` currently accepts `isOpen`, `onClose`, `items`, and `className` props
- Cart context has `removeItem` and `updateQuantity` methods available
- Drawer displays items but has no remove or quantity controls
- Layout component renders CartDrawer but doesn't pass remove/update callbacks
- No interactive cart management yet

**Important**: This task only adds the prop interfaces. The actual UI controls (buttons) will be added in TASK-2.1.12. This task ensures the component API is ready.

## User Stories

**As a developer**, I need CartDrawer to accept remove and update callbacks so that I can implement interactive cart management in the next task.

**As a customer**, the foundation is being prepared so that I can remove items and adjust quantities in my cart.

## Checklist

### Preparation and Setup

- [ ] Review `CartDrawer` current props interface
- [ ] Review `useCart` API (`removeItem`, `updateQuantity` method signatures)
- [ ] Understand callback prop patterns in React
- [ ] Check all current usages of `CartDrawer` in codebase

### Implementation Steps

- [ ] Step 1: Extend `CartDrawerProps` interface
  - [ ] Add `onRemoveItem?: (itemId: string) => void` prop
  - [ ] Add `onUpdateQuantity?: (itemId: string, quantity: number) => void` prop
  - [ ] Make both optional (using `?`) for backward compatibility
- [ ] Step 2: Update component to accept new props
  - [ ] Destructure new props in component parameters
  - [ ] Props should be optional to maintain backward compatibility
- [ ] Step 3: Update all CartDrawer usages
  - [ ] Find all places where `CartDrawer` is used
  - [ ] Add the new props (can be `undefined` or no-op functions initially)
  - [ ] Ensure existing functionality still works
- [ ] Step 4: Verify TypeScript compilation
  - [ ] Ensure no type errors
  - [ ] Ensure backward compatibility is maintained

### Specific Requirements

- [ ] Requirement 1: Props must be optional
  - [ ] Use `?` to make props optional
  - [ ] This maintains backward compatibility
  - [ ] Existing usages don't need to change immediately
- [ ] Requirement 2: Callback signatures must match cart methods
  - [ ] `onRemoveItem(itemId: string)` matches `removeItem(itemId: string)`
  - [ ] `onUpdateQuantity(itemId: string, quantity: number)` matches `updateQuantity(itemId: string, quantity: number)`
- [ ] Requirement 3: All usages must be updated
  - [ ] Layout component that renders CartDrawer
  - [ ] Any other places CartDrawer is used
  - [ ] Can pass `undefined` or no-op functions for now

### Error Handling and Edge Cases

- [ ] Handle case where callbacks are not provided
  - [ ] Component should still render
  - [ ] UI controls will be disabled/hidden in next task if callbacks missing
- [ ] Ensure TypeScript catches missing props in future
  - [ ] Props are optional now but will be used in next task
- [ ] Verify no breaking changes to existing functionality

### Testing

- [ ] Write unit test for extended props
  - [ ] Test that component accepts new props
  - [ ] Test that props are optional
  - [ ] Test that component renders with/without new props
- [ ] Update existing CartDrawer tests
  - [ ] Ensure all existing tests still pass
  - [ ] Add tests for new prop acceptance
- [ ] Run type checking: `npm run type-check`
- [ ] Run linting: `npm run lint`
- [ ] **DO NOT manually test by running the server** - use automated tests instead

### Documentation

- [ ] Update JSDoc for CartDrawer component
  - [ ] Document new props
  - [ ] Explain their purpose
  - [ ] Note they're optional for now
- [ ] Document that UI controls will be added in next task

### Verification

- [ ] Verify CartDrawerProps interface includes new props
- [ ] Verify component accepts new props
- [ ] Verify all usages are updated
- [ ] Verify TypeScript compilation succeeds
- [ ] Verify existing tests pass
- [ ] Verify no linting errors
- [ ] Verify no breaking changes

## Notes

- This task is part of Phase 2.1 — Add Full Cart to the Preview System
- **Execution Timing**: Must be completed after TASK-2.1.7 (integrate CartDrawer) and before TASK-2.1.12 (implement remove/quantity UI controls)
- **Dependencies**: 
  - TASK-2.1.7: Integrate `CartDrawer` into layout
- **Important Considerations**: 
  - This is a preparation task - no UI changes yet
  - Props are optional to maintain backward compatibility
  - Actual UI controls will be added in TASK-2.1.12
  - Layout will need to pass these callbacks in TASK-2.1.11
- **Task Independence**: Can be completed independently after CartDrawer is integrated
- **Current State**: CartDrawer displays items but has no management capabilities

## Related Tasks

- Previous: TASK-2.1.9 (Wire "Add to Cart" button in `MenuItemCard`)
- Next: TASK-2.1.11 (Implement remove-from-cart behavior in layout)
- Dependencies:
  - TASK-2.1.7: Integrate `CartDrawer` into layout
- Related:
  - TASK-2.1.11: Will implement the callbacks that use these props
  - TASK-2.1.12: Will add UI controls that call these callbacks

## Definition of Done

This is a **CODE/FILE WRITING TASK**.

**Definition of Done**: "A Pull Request was created OR code was pushed to origin with the task complete"

**Acceptance Criteria**:
1. `CartDrawerProps` interface includes `onRemoveItem` and `onUpdateQuantity` props
2. Props are optional (using `?`)
3. Component accepts new props in parameters
4. All CartDrawer usages are updated to include new props (can be undefined)
5. TypeScript compilation succeeds
6. Existing tests pass
7. New tests pass
8. No linting errors
9. No breaking changes to existing functionality

**User Story Completion**:
- ✅ **As a developer**, CartDrawer API is ready for interactive cart management
- ✅ **As a customer**, the foundation is ready for removing items and adjusting quantities

**Test Cases**:
- [ ] **Test Case 1**: Component accepts new props
  - Setup: Render CartDrawer with `onRemoveItem` and `onUpdateQuantity` props
  - Expected: Component renders without errors
- [ ] **Test Case 2**: Props are optional
  - Setup: Render CartDrawer without new props
  - Expected: Component renders without errors
- [ ] **Test Case 3**: TypeScript types are correct
  - Setup: Verify prop types match callback signatures
  - Expected: No TypeScript errors, types match `removeItem` and `updateQuantity`
- [ ] **Test Case 4**: All usages updated
  - Setup: Check all places CartDrawer is used
  - Expected: All usages include new props (even if undefined)
