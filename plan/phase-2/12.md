# TASK-2-1-12: Implement remove and quantity UI controls in `CartDrawer`

**Section**: 2.1 Cart + Ordering Flow
**Subsection**: 2.1.12
**Task ID**: TASK-2-1-12

## Description

- For each cart line item, add a "Remove" button or trash icon that calls `onRemoveItem(item.id)`.
- Add +/- quantity buttons (or a numeric input) that call `onUpdateQuantity(item.id, newQuantity)`.
- Ensure total recalculates correctly when quantities change or items are removed.

## Current State

- `CartDrawer` displays cart items but has no interactive controls
- `CartDrawer` accepts `onRemoveItem` and `onUpdateQuantity` props (from TASK-2.1.10)
- Layout passes handlers to CartDrawer (from TASK-2.1.11)
- No remove buttons or quantity controls exist yet
- Total is calculated but doesn't update interactively

**Important**: This task adds the UI controls that customers will interact with to manage their cart.

## User Stories

**As a customer**, I want to remove items from my cart so that I can correct mistakes or change my mind about items.

**As a customer**, I want to adjust item quantities using +/- buttons so that I can order the right amount of each item easily.

**As a developer**, I need UI controls that call the handlers passed to CartDrawer so that cart management is fully functional.

**As a restaurant owner**, I want customers to be able to manage their cart in the preview so that I can demonstrate the complete ordering experience.

## Checklist

### Preparation and Setup

- [ ] Review relevant components and APIs
- [ ] Understand dependencies and prerequisites
- [ ] Set up any required tooling or environment

### Implementation Steps

- [ ] Step 1: For each cart line item, add a "Remove" button or trash icon that calls `onRemoveItem(item.id)`.
- [ ] Step 2: Add +/- quantity buttons (or a numeric input) that call `onUpdateQuantity(item.id, newQuantity)`.
- [ ] Step 3: Ensure total recalculates correctly when quantities change or items are removed.

### Specific Requirements

- [ ] Requirement 1: Remove button must be accessible and clear
  - [ ] Button or trash icon should be visible for each item
  - [ ] Should have proper ARIA labels ("Remove [item name]")
  - [ ] Should call `onRemoveItem(item.id)` when clicked
- [ ] Requirement 2: Quantity controls must be intuitive
  - [ ] +/- buttons or numeric input for each item
  - [ ] Should call `onUpdateQuantity(item.id, newQuantity)` when changed
  - [ ] Should prevent invalid quantities (negative, zero should remove item)
- [ ] Requirement 3: Total must update automatically
  - [ ] Total recalculates when items are removed
  - [ ] Total recalculates when quantities change
  - [ ] Total displays correct sum of all items

### Error Handling and Edge Cases

- [ ] Handle case where `onRemoveItem` or `onUpdateQuantity` are not provided
  - [ ] Controls should be disabled or hidden if callbacks missing
  - [ ] Should not cause errors
- [ ] Handle rapid clicks on quantity buttons
  - [ ] Should update quantity correctly
  - [ ] Should not cause UI glitches
- [ ] Handle quantity reaching zero
  - [ ] Should remove item (handled by cart context)
  - [ ] Should update UI immediately

### Testing

- [ ] Write unit tests for new functionality
- [ ] Write integration tests if applicable
- [ ] Test error handling paths
- [ ] Run type checking: `npm run type-check`
- [ ] Run linting: `npm run lint`
- [ ] **DO NOT manually test by running the server** - use automated tests instead

### Documentation

- [ ] Update code comments and JSDoc/TSDoc as needed
- [ ] Update relevant documentation files

### Verification

- [ ] Verify all requirements are met
- [ ] Verify no regressions were introduced
- [ ] Verify code quality standards are met

## Notes

- This task is part of Phase 2.1 — Add Full Cart to the Preview System
- **Execution Timing**: Must be completed after TASK-2.1.11 (implement handlers) 
- **Dependencies**: 
  - TASK-2.1.11: Implement remove-from-cart behavior in layout using `useCartContext`
- **Important Considerations**: 
  - UI controls should be clearly visible and accessible
  - Total should update immediately when changes are made
  - Consider mobile-friendly touch targets for buttons

## Related Tasks

- Previous: TASK-2.1.11 (Implement remove-from-cart behavior in layout)
- Next: TASK-2.1.13 (Integrate `CheckoutForm` into `CartDrawer`)
- Dependencies:
  - TASK-2.1.11: Implement remove-from-cart behavior in layout using `useCartContext`

## Definition of Done

This is a **CODE/FILE WRITING TASK** (or appropriate type).

**Definition of Done**: "A Pull Request was created OR code was pushed to origin with the task complete"

**Acceptance Criteria**:
1. Remove button/icon is visible for each cart item
2. Quantity controls (+/- buttons or input) are visible for each item
3. Clicking remove button calls `onRemoveItem` with correct itemId
4. Changing quantity calls `onUpdateQuantity` with correct params
5. Total recalculates correctly when items are removed
6. Total recalculates correctly when quantities change
7. TypeScript compilation succeeds
8. Unit tests pass
9. Integration tests pass
10. No linting errors

**User Story Completion**:
- ✅ **As a customer**, I can remove items and adjust quantities in my cart
- ✅ **As a developer**, UI controls are connected to cart handlers
- ✅ **As a restaurant owner**, customers can fully manage their cart

**Test Cases**:
- [ ] **Test Case 1**: Remove button calls handler
  - Setup: Click remove button for an item
  - Expected: `onRemoveItem` is called with item.id, item is removed from cart
- [ ] **Test Case 2**: Quantity increase updates cart
  - Setup: Click + button to increase quantity from 1 to 2
  - Expected: `onUpdateQuantity` is called with item.id and 2, quantity updates
- [ ] **Test Case 3**: Quantity decrease updates cart
  - Setup: Click - button to decrease quantity from 2 to 1
  - Expected: `onUpdateQuantity` is called with item.id and 1, quantity updates
- [ ] **Test Case 4**: Total recalculates on remove
  - Setup: Cart has 2 items totaling $20, remove one item worth $10
  - Expected: Total updates to $10
- [ ] **Test Case 5**: Total recalculates on quantity change
  - Setup: Item quantity 1 at $5, increase to 3
  - Expected: Total for that item updates from $5 to $15, overall total updates
