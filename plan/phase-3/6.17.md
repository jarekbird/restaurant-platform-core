# TASK-6.17: Wire metadata into preview route

**Section**: 6. SEO & AI Search Structure in the Prototype
**Subsection**: 6.17
**Task ID**: TASK-6.17

## Description

In `app/preview/[slug]/page.tsx`, add `generateMetadata` function that calls `buildRestaurantMetadata` to set title and description for the preview page.

**Reference Implementation**: 
- `app/preview/[slug]/page.tsx` (current preview page)
- `lib/seo/restaurantMetadata.ts` (from TASK-6.16)
- Next.js Metadata API documentation

## Current State

Preview page doesn't set explicit SEO metadata. `buildRestaurantMetadata` helper has been created in TASK-6.16.

**Important**: This task should be executed after TASK-6.16, and before TASK-6.18.

## Checklist

### Implementation Steps

- [ ] Step 1: Add generateMetadata function to preview page
  - [ ] Export async `generateMetadata` function
  - [ ] Accept `params: Promise<{ slug: string }>`
  - [ ] Load restaurant data using `loadRestaurant(slug)`
  - [ ] Call `buildRestaurantMetadata(config, 'home')`
  - [ ] Return metadata object
- [ ] Step 2: Ensure metadata is set correctly
  - [ ] Verify title appears in browser tab
  - [ ] Verify description is set (check page source)

### Testing

- [ ] Write Next.js metadata tests:
  - [ ] Test generateMetadata returns correct title
  - [ ] Test generateMetadata returns correct description
  - [ ] Test generateMetadata handles missing restaurant (404)
- [ ] Run full test suite: `npm test`

## Related Tasks

- Previous: TASK-6.16
- Next: TASK-6.18
- Dependencies: TASK-6.16

## Definition of Done

This is a **CODE/FILE WRITING TASK**.

**Definition of Done**: "`generateMetadata` has been added to preview page and calls `buildRestaurantMetadata`. Metadata tests verify title and description are set correctly. All tests pass. Code is committed and pushed to origin."

**User Stories**:
- As a search engine, I want proper page metadata so I can display restaurant pages in search results
- As a visitor, I want descriptive page titles so I know which restaurant I'm viewing

**Automated Tests**: 
- Next.js metadata tests verifying generateMetadata returns correct title and description
- Tests verifying generateMetadata handles missing restaurant

**Git Commit & Push**: 
- Commit with message: `feat(phase-3): wire SEO metadata into preview route (TASK-6.17)`
- Push to origin: `git push origin <branch-name>`
