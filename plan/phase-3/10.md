# TASK-010: Implement Heading Structure Planning

**Section**: 3. SEO Metadata & On-Page Structure
**Subsection**: 3.2
**Task ID**: TASK-010

## Description

Implement a planner that generates heading structures (H1 and H2) for all page types following Owner.com patterns. The planner returns the H1 text and an ordered list of H2 section headings for each page type.

This ensures consistent, SEO-friendly heading hierarchies across all restaurant pages.

**Reference Implementation**: 
- `menuhq/restaurant-finder/plan/phase-3/master-plan.md` (Section 4.3)

## Current State

- Restaurant models exist (from TASK-002)
- SEO metadata generator exists (from TASK-009)
- No heading structure planner exists

**Prerequisites**: TASK-002, TASK-009 must be completed

## Checklist

### Preparation and Setup

- [ ] Review master plan Section 4.3 for heading patterns
- [ ] Understand Owner.com H1/H2 conventions
- [ ] Plan heading data structure
- [ ] Plan heading templates for each page type

### Implementation Steps

- [ ] Step 1: Create heading planner module
  - [ ] Create `src/restaurant_site_planner/planners/headings.py`
- [ ] Step 2: Define heading data models
  - [ ] Create `HeadingStructure` model with:
    - [ ] `h1: str` (required) - main page heading
    - [ ] `h2_sections: List[str]` (required) - ordered list of H2 headings
- [ ] Step 3: Implement restaurant home headings
  - [ ] Add `get_restaurant_home_headings(restaurant: Restaurant) -> HeadingStructure` function
  - [ ] H1: `[Restaurant Name] – [Cuisine] in [City, State]`
  - [ ] H2 sections (in order):
    - [ ] "Order Online"
    - [ ] "Menu Highlights"
    - [ ] "About"
    - [ ] "Reviews"
    - [ ] "Location & Hours"
    - [ ] "FAQs" (if FAQs exist)
- [ ] Step 4: Implement menu page headings
  - [ ] Add `get_menu_page_headings(restaurant: Restaurant, menu: Menu) -> HeadingStructure` function
  - [ ] H1: `[Restaurant Name] Menu – [Cuisine] in [City]`
  - [ ] H2 sections: One per menu category (use category names)
- [ ] Step 5: Implement catering page headings
  - [ ] Add `get_catering_page_headings(restaurant: Restaurant) -> HeadingStructure` function
  - [ ] H1: `[Restaurant Name] Catering – [Cuisine] in [City]`
  - [ ] H2 sections: "Catering Options", "Menu Packages", "Contact Us"
- [ ] Step 6: Implement location page headings
  - [ ] Add `get_location_page_headings(restaurant: Restaurant, location: Location) -> HeadingStructure` function
  - [ ] H1: `[Restaurant Name] – [Location Name]`
  - [ ] H2 sections: "Location & Hours", "Get Directions", "Order Online"
- [ ] Step 7: Implement city index headings
  - [ ] Add `get_city_index_headings(city: str) -> HeadingStructure` function
  - [ ] H1: `Best Restaurants in [City]`
  - [ ] H2 sections: "Featured Restaurants", "By Cuisine", "Map View"
- [ ] Step 8: Implement cuisine index headings
  - [ ] Add `get_cuisine_index_headings(city: str, cuisine: str) -> HeadingStructure` function
  - [ ] H1: `Best [Cuisine] in [City]`
  - [ ] H2 sections: "Top [Cuisine] Restaurants", "Map View"

### Specific Requirements

- [ ] Requirement 1: H1 follows Owner.com conventions
  - [ ] Restaurant name, cuisine, city are included
  - [ ] Format: `[Restaurant Name] – [Cuisine] in [City, State]`
  - [ ] Consistent across page types
- [ ] Requirement 2: H2 sections are logical and ordered
  - [ ] Most important sections first
  - [ ] All required sections included
  - [ ] Optional sections only if data exists

### Error Handling and Edge Cases

- [ ] Handle error case 1: Missing restaurant data
  - [ ] Use defaults or skip restaurant-specific fields
- [ ] Handle edge case 1: Restaurant with no cuisine
  - [ ] H1 uses restaurant name and city only
- [ ] Handle edge case 2: Menu with no categories
  - [ ] H2 sections list is empty or has default section
- [ ] Handle edge case 3: Missing state
  - [ ] H1 uses city only

### Testing

- [ ] Write unit tests: `tests/test_planners_headings.py`
  - [ ] Test `get_restaurant_home_headings()` for sample restaurant
  - [ ] Test H1 text follows `[Restaurant Name] – [Cuisine] in [City, State]` conventions
  - [ ] Test H2 headings include required sections (Order Online, Menu Highlights, About, etc.)
  - [ ] Test `get_menu_page_headings()` with menu categories
  - [ ] Test H2 for each menu category
  - [ ] Test `get_catering_page_headings()`
  - [ ] Test `get_location_page_headings()`
  - [ ] Test `get_city_index_headings()`
  - [ ] Test `get_cuisine_index_headings()`
  - [ ] Test headings handle missing optional data
- [ ] Run full test suite: `pytest tests/test_planners_headings.py`
- [ ] Verify test coverage: `pytest --cov=restaurant_site_planner.planners.headings`

### Documentation

- [ ] Add docstrings to all heading planner functions
- [ ] Document heading patterns and conventions
- [ ] Add examples of heading structures

### Verification

- [ ] Verify headings follow Owner.com patterns
- [ ] Verify H1/H2 structure is logical
- [ ] Verify no regressions

## Notes

- This task is part of Phase 3: Owner.com-Aligned Restaurant Sites
- **Execution Timing**: After TASK-009
- **Dependencies**: 
  - TASK-002: Restaurant models
  - TASK-009: SEO metadata (for context)
- **Important Considerations**: 
  - Headings should be SEO-friendly
  - H1 should be unique per page
  - H2 order matters for content hierarchy
- **Task Independence**: Can be developed after dependencies

## Related Tasks

- Previous: TASK-009 (SEO metadata)
- Next: TASK-011 (Content requirements checker)
- Dependencies:
  - TASK-002, TASK-009
- Related:
  - TASK-015: Will use headings in page configs

## Definition of Done

### Task Type: CODE/FILE WRITING TASK

**User Stories**:
1. **As a developer**, I want heading structures so pages have proper SEO hierarchy
2. **As an SEO specialist**, I want consistent H1/H2 patterns so search engines understand page structure
3. **As a developer**, I want heading planners so I can generate headings automatically

**Automated Tests**:
- [ ] Unit tests exist: `tests/test_planners_headings.py`
- [ ] All tests pass: `pytest tests/test_planners_headings.py` exits with code 0
- [ ] Tests verify H1 text follows `[Restaurant Name] – [Cuisine] in [City, State]` conventions
- [ ] Tests verify H2 headings include required sections (Order Online, Menu Highlights, About, etc.)
- [ ] Test coverage >= 85%

**Code Quality**:
- [ ] All functions have type hints
- [ ] Heading structures are properly defined
- [ ] Code follows Python style guidelines

**Git & Version Control**:
- [ ] All new files are added to git: `git add .`
- [ ] Changes are committed: `git commit -m "TASK-010: Implement heading structure planning"`
- [ ] Code is pushed to origin: `git push origin <branch-name>`
- [ ] Commit message includes task ID: TASK-010

**Final Verification**:
- [ ] All checklist items completed
- [ ] All tests pass
- [ ] Headings follow Owner.com patterns
- [ ] Code committed and pushed
