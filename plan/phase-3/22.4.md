# TASK-022.4: Integrate Loyalty/VIP Capture Modules

**Section**: 6. Direct Ordering, Loyalty, Offers, and Repeat Orders
**Subsection**: 6.2.4
**Task ID**: TASK-022.4
**Parent Task**: TASK-022

## Description

Integrate loyalty/VIP capture modules into restaurant home pages when loyalty program is enabled.

## Current State

- Marketplace links integrated (from TASK-022.3)
- Loyalty modules need to be integrated

**Prerequisites**: TASK-022.3 should be completed

## Checklist

### Implementation Steps

- [ ] Step 1: Integrate loyalty capture section
  - [ ] If `loyalty_config.enabled` is True:
    - [ ] Create loyalty capture section:
      - [ ] Headline: loyalty_config.program_name or "Join Our VIP Club"
      - [ ] Benefits list: loyalty_config.benefits
      - [ ] Signup form or CTA: links to loyalty_config.signup_url
      - [ ] Copy: loyalty_config.signup_copy
      - [ ] First order discount: loyalty_config.first_order_discount (if available)
    - [ ] Placement: Near hero or above footer (configurable)
    - [ ] Email/SMS capture if enabled
  - [ ] If False: Skip loyalty section

### Testing

- [ ] Write unit tests: `tests/test_builders_pages_loyalty.py`
  - [ ] Test loyalty capture modules when enabled
  - [ ] Test presence of capture modules and correct copy
  - [ ] Test section is omitted when disabled

## Related Tasks

- Parent: TASK-022
- Previous: TASK-022.3 (Marketplace links)
- Next: TASK-023 (Plan repeat-order entry points)

## Definition of Done

### Task Type: CODE/FILE WRITING TASK

**Automated Tests**:
- [ ] Unit tests exist and pass
- [ ] Tests verify loyalty modules are present when enabled
- [ ] Test coverage >= 80%

**Git & Version Control**:
- [ ] Changes committed: `git commit -m "TASK-022.4: Integrate loyalty/VIP capture modules"`
- [ ] Code pushed to origin

