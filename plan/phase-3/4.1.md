# TASK-004.1: Implement Color Tokens

**Section**: 1. Theme System & Style Families
**Subsection**: 1.1.1
**Task ID**: TASK-004.1
**Parent Task**: TASK-004

## Description

Implement the `ColorTokens` class that defines all color values for a restaurant theme. This includes background, surface, primary, accent, text, and border colors following Owner.com patterns.

This is the first step in building the RestaurantTheme schema.

**Reference Implementation**: 
- `menuhq/restaurant-finder/plan/owner-com-research.md` (color patterns)
- `menuhq/restaurant-finder/plan/phase-3/master-plan.md` (Section 2.1)

## Current State

- Config models exist (from TASK-003) with RestaurantTheme stub
- No color token implementation exists

**Prerequisites**: TASK-003 must be completed

## Checklist

### Preparation and Setup

- [ ] Review owner-com-research.md for color patterns
- [ ] Review master plan Section 2.1 for color requirements
- [ ] Understand Owner.com color systems
- [ ] Plan color token structure

### Implementation Steps

- [ ] Step 1: Create ColorTokens model
  - [ ] Create `ColorTokens` class in `src/restaurant_site_planner/themes/tokens.py`
  - [ ] Add required color fields:
    - [ ] `background: str` (required) - warm neutral base color
    - [ ] `surface: str` (required) - elevated card background
    - [ ] `primary: str` (required) - strong saturated accent for buttons/CTAs
    - [ ] `accent: str` (required) - softer secondary accent
    - [ ] `text: str` (required) - main text color
    - [ ] `text_subtle: str` (required) - subtle/secondary text color
    - [ ] `border: str` (required) - divider and card border color
- [ ] Step 2: Add color validation
  - [ ] Validate hex format (e.g. "#FF5733") or valid CSS color names
  - [ ] Ensure all required colors are provided
  - [ ] Add validator to check color format
- [ ] Step 3: Add helper methods (optional)
  - [ ] Method to convert to CSS variables format
  - [ ] Method to get contrast ratio (for accessibility)

### Specific Requirements

- [ ] Requirement 1: Colors are valid
  - [ ] Hex format or CSS color names
  - [ ] All required colors present
- [ ] Requirement 2: Colors follow Owner.com patterns
  - [ ] Background is warm neutral
  - [ ] Primary is strong and saturated
  - [ ] Text has good contrast

### Error Handling and Edge Cases

- [ ] Handle error case 1: Invalid color format
  - [ ] Clear validation error
- [ ] Handle error case 2: Missing required colors
  - [ ] Validation requires all colors
- [ ] Handle edge case 1: CSS color names
  - [ ] Support both hex and named colors

### Testing

- [ ] Write unit tests: `tests/test_themes_tokens_color.py`
  - [ ] Test ColorTokens creation with valid hex colors
  - [ ] Test ColorTokens creation with CSS color names
  - [ ] Test validation errors for invalid color formats
  - [ ] Test validation errors for missing required colors
  - [ ] Test all required colors are present
- [ ] Run full test suite: `pytest tests/test_themes_tokens_color.py`
- [ ] Verify test coverage: `pytest --cov=restaurant_site_planner.themes.tokens`

### Documentation

- [ ] Add docstrings to ColorTokens class
- [ ] Document color meanings
- [ ] Add examples

### Verification

- [ ] Verify color validation works
- [ ] Verify all required colors are present
- [ ] Verify no regressions

## Notes

- This task is part of Phase 3: Owner.com-Aligned Restaurant Sites
- **Execution Timing**: After TASK-003
- **Dependencies**: 
  - TASK-003: Config models must exist
- **Important Considerations**: 
  - Colors should be valid CSS colors
  - Support both hex and named colors
- **Task Independence**: Can be developed after TASK-003

## Related Tasks

- Parent: TASK-004 (Implement RestaurantTheme schema)
- Next: TASK-004.2 (Implement typography tokens)
- Dependencies:
  - TASK-003

## Definition of Done

### Task Type: CODE/FILE WRITING TASK

**User Stories**:
1. **As a developer**, I want color tokens so I can define theme colors
2. **As a developer**, I want color validation so invalid colors are caught

**Automated Tests**:
- [ ] Unit tests exist: `tests/test_themes_tokens_color.py`
- [ ] All tests pass: `pytest tests/test_themes_tokens_color.py` exits with code 0
- [ ] Tests verify valid color formats are accepted
- [ ] Tests verify invalid color formats raise errors
- [ ] Test coverage >= 80%

**Code Quality**:
- [ ] ColorTokens class has type hints
- [ ] Validation is comprehensive
- [ ] Code follows Python style guidelines

**Git & Version Control**:
- [ ] All new files are added to git: `git add .`
- [ ] Changes are committed: `git commit -m "TASK-004.1: Implement color tokens"`
- [ ] Code is pushed to origin: `git push origin <branch-name>`
- [ ] Commit message includes task ID: TASK-004.1

**Final Verification**:
- [ ] All checklist items completed
- [ ] All tests pass
- [ ] Color tokens work correctly
- [ ] Code committed and pushed

