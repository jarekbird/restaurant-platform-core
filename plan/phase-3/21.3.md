# TASK-021.3: Implement LoyaltyConfig Model

**Section**: 6. Direct Ordering, Loyalty, Offers, and Repeat Orders
**Subsection**: 6.1.3
**Task ID**: TASK-021.3
**Parent Task**: TASK-021

## Description

Implement the LoyaltyConfig model that defines loyalty/VIP program configuration for restaurants.

## Current State

- OrderingConfig exists (from TASK-021.2)
- No LoyaltyConfig exists

**Prerequisites**: TASK-021.2 should be completed

## Checklist

### Implementation Steps

- [ ] Step 1: Implement LoyaltyConfig model
  - [ ] Define `LoyaltyConfig` class with:
    - [ ] `enabled: bool` (required, default False)
    - [ ] `program_name: str` (required if enabled)
    - [ ] `program_type: str` (required if enabled)
    - [ ] `signup_url: str` (required if enabled)
    - [ ] `signup_copy: str` (required if enabled)
    - [ ] `benefits: List[str]` (optional)
    - [ ] `first_order_discount: Optional[str]`
    - [ ] `email_capture_enabled: bool` (default True)
    - [ ] `sms_capture_enabled: bool` (default False)
- [ ] Step 2: Add validation
  - [ ] Program fields required if enabled
  - [ ] Validate URLs are valid
- [ ] Step 3: Add helper methods
  - [ ] `is_active() -> bool`

### Testing

- [ ] Write unit tests: `tests/test_models_loyalty_config.py`
  - [ ] Test LoyaltyConfig creation
  - [ ] Test validation for required fields
  - [ ] Test configs for restaurants with loyalty enabled/disabled

## Related Tasks

- Parent: TASK-021
- Previous: TASK-021.2 (OrderingConfig)
- Next: TASK-022 (Integrate ordering & loyalty into page configs)

## Definition of Done

### Task Type: CODE/FILE WRITING TASK

**Automated Tests**:
- [ ] Unit tests exist and pass
- [ ] Test coverage >= 85%

**Git & Version Control**:
- [ ] Changes committed: `git commit -m "TASK-021.3: Implement LoyaltyConfig model"`
- [ ] Code pushed to origin

