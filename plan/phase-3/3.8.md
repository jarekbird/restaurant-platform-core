# TASK-3.8: Refine MenuItemCard for image-forward layout

**Section**: 3. Menu Presentation & Category Structure
**Subsection**: 3.8
**Task ID**: TASK-3.8

## Description

Refine the `MenuItemCard` component to ensure each card has a consistent image area when images exist (fixed aspect ratio container with `object-cover`), displays name, description, price, and Add to Cart button with clear visual hierarchy, and uses theme `primary` color for the Add to Cart button. Keep the underlying `Menu` schema unchanged; only adjust presentation. This task focuses on making menu cards image-forward and conversion-optimized, following Owner.com patterns.

**Reference Implementation**: 
- `components/menu/MenuItemCard.tsx` (current implementation)
- `master-plan-redacted.md` Section 4.3 (Menu Presentation)

## Current State

The `MenuItemCard` component currently:
- Renders item name, description, price, tags, and Add to Cart button
- Has a placeholder for images (not fully implemented)
- Uses hard-coded colors (black/white for button, gray for borders)
- Image is shown at the bottom (not image-forward layout)
- Button doesn't use theme `primary` color

The component needs to:
- Show image prominently (if present) with consistent aspect ratio
- Use theme tokens for colors (from TASK-1.5, verify)
- Ensure clear visual hierarchy (image → name → description → price → button)
- Use theme `primary` for Add to Cart button

**Important**: This task should be executed after TASK-1.5 (themes wired through components), and before TASK-3.9.

## Checklist

### Preparation and Setup

- [ ] Review current `MenuItemCard.tsx` implementation
- [ ] Review `MenuItem` schema to understand `image` field structure
- [ ] Review `master-plan-redacted.md` Section 4.3 for requirements
- [ ] Review Owner.com menu card patterns from research
- [ ] Understand Next.js Image component usage (if not already using it)

### Implementation Steps

- [ ] Step 1: Implement image-forward layout
  - [ ] Move image to top of card (if image exists)
  - [ ] Create fixed aspect ratio container (e.g., 16:9 or 4:3)
  - [ ] Use Next.js `Image` component with `object-cover` for proper image display
  - [ ] Ensure image container has consistent height across all cards
- [ ] Step 2: Refine visual hierarchy
  - [ ] Ensure order: image (top) → name → description → price → Add to Cart button (bottom)
  - [ ] Use appropriate spacing between elements
  - [ ] Ensure name is prominent (larger font, bold)
  - [ ] Ensure price is clearly visible
- [ ] Step 3: Apply theme tokens
  - [ ] Replace hard-coded card background with `theme.colors.surface`
  - [ ] Replace hard-coded text colors with `theme.colors.text` and `theme.colors.textMuted`
  - [ ] Replace hard-coded border with `theme.colors.border`
  - [ ] Replace hard-coded button colors with `theme.colors.primary`
- [ ] Step 4: Ensure responsive layout
  - [ ] Test card on mobile (should stack appropriately)
  - [ ] Test card on tablet/desktop (should fit grid layout)
  - [ ] Ensure image aspect ratio is maintained on all viewports
- [ ] Step 5: Maintain existing functionality
  - [ ] Ensure Add to Cart button still works (calls `addItem`)
  - [ ] Ensure tags and modifiers still display (if present)
  - [ ] Ensure accessibility (ARIA labels, keyboard navigation)

### Specific Requirements

- [ ] Requirement 1: Image area must be consistent when images exist:
  - Fixed aspect ratio container (e.g., `aspect-video` or `aspect-[4/3]`)
  - Image should use `object-cover` to fill container
  - Image should be at top of card (image-forward layout)
  - Image container should have consistent height across all cards
- [ ] Requirement 2: Visual hierarchy must be clear:
  - Image (if present) → Name (prominent) → Description → Price → Add to Cart button
  - Appropriate spacing between elements
  - Name should be larger and bold
- [ ] Requirement 3: Theme tokens must be used:
  - Card background: `theme.colors.surface`
  - Text: `theme.colors.text` and `theme.colors.textMuted`
  - Border: `theme.colors.border`
  - Button: `theme.colors.primary`
- [ ] Requirement 4: Add to Cart button must:
  - Use theme `primary` color
  - Be clearly visible and accessible
  - Maintain existing functionality (calls `addItem`)
- [ ] Requirement 5: Component must work with or without images:
  - If image is missing, card should still render correctly
  - Layout should adapt gracefully

### Error Handling and Edge Cases

- [ ] Handle case where `item.image` is missing (card should still render)
- [ ] Handle case where image URL is invalid (Next.js Image should handle this)
- [ ] Handle case where `item.description` is missing (should not break layout)
- [ ] Handle case where `item.price` is 0 or negative (should display correctly)
- [ ] Handle very long item names (should truncate or wrap appropriately)
- [ ] Handle very long descriptions (should truncate or wrap appropriately)

### Testing

- [ ] Write component tests:
  - [ ] Test that card renders with image when `item.image` is present
  - [ ] Test that card renders without image when `item.image` is missing
  - [ ] Test that image uses fixed aspect ratio container
  - [ ] Test that visual hierarchy is correct (image → name → description → price → button)
  - [ ] Test that Add to Cart button uses theme `primary` color classes
  - [ ] Test that Add to Cart button calls `addItem` when clicked
  - [ ] Test that card uses theme tokens for colors (surface, text, border, primary)
  - [ ] Test that card renders correctly with different theme keys
- [ ] Write accessibility tests:
  - [ ] Test keyboard navigation to Add to Cart button
  - [ ] Test ARIA labels are present
- [ ] Run full test suite: `npm test` (if applicable)
- [ ] Run type checking: `npm run type-check` (if applicable)
- [ ] Run linting: `npm run lint` (if applicable)
- [ ] **DO NOT manually test by running the server** - use automated tests instead

### Documentation

- [ ] Update component JSDoc/TSDoc comments to document image-forward layout
- [ ] Document theme token usage
- [ ] Document aspect ratio choices
- [ ] Update any component usage documentation

### Verification

- [ ] Verify image-forward layout works correctly
- [ ] Verify visual hierarchy is clear
- [ ] Verify theme tokens are used correctly
- [ ] Verify Add to Cart button uses theme `primary` color
- [ ] Verify responsive layout works on different viewport sizes
- [ ] Verify all tests pass
- [ ] Verify code quality standards are met

## Notes

- This task is part of Phase 3: Menu Presentation & Category Structure
- **Execution Timing**: Execute after TASK-1.5, before TASK-3.9
- **Dependencies**: 
  - TASK-1.5: Wire themes through Restaurant components (MenuItemCard should be theme-aware)
- **Important Considerations**: 
  - Image-forward layout is key for conversion (Owner.com pattern)
  - Consistent aspect ratios make grid layouts look professional
  - Theme tokens ensure consistency across themes
  - Maintain accessibility (keyboard, screen readers)
- **Task Independence**: Can be completed independently after TASK-1.5
- **Current State**: MenuItemCard exists but lacks image-forward layout and full theme integration

## Related Tasks

- Previous: TASK-2.7 (Update RestaurantLayout header)
- Next: TASK-3.9 (Treat categories as SEO/AI-friendly sections)
- Dependencies:
  - TASK-1.5: Wire themes through Restaurant components
- Related:
  - TASK-3.9: Will ensure categories use H2 headings (SEO)

## Definition of Done

This is a **CODE/FILE WRITING TASK**.

**Definition of Done**: "The `MenuItemCard` component has been refined for image-forward layout with consistent aspect ratio image containers, clear visual hierarchy (image → name → description → price → button), and theme token usage (surface, text, border, primary). Add to Cart button uses theme `primary` color. Component tests verify image rendering, visual hierarchy, theme token usage, and Add to Cart functionality. Accessibility tests verify keyboard navigation and ARIA labels. All tests pass. Code is committed and pushed to origin."

**User Stories**:
- As a visitor, I want to see menu item images prominently so I can visualize what I'm ordering
- As a visitor, I want a clear visual hierarchy on menu cards so I can quickly scan items
- As a restaurant owner, I want menu cards to use my theme colors so the site looks cohesive

**Automated Tests**: 
- Component tests verifying card renders with image when `item.image` is present
- Component tests verifying card renders without image when `item.image` is missing
- Component tests verifying image uses fixed aspect ratio container
- Component tests verifying visual hierarchy (image → name → description → price → button)
- Component tests verifying Add to Cart button uses theme `primary` color classes and calls `addItem`
- Component tests verifying card uses theme tokens for colors (surface, text, border, primary)
- Component tests verifying card renders correctly with different theme keys
- Accessibility tests verifying keyboard navigation and ARIA labels

**Git Commit & Push**: 
- Commit with message: `feat(phase-3): refine MenuItemCard for image-forward layout (TASK-3.8)`
- Push to origin: `git push origin <branch-name>`
- Ensure all test files are included in the commit
