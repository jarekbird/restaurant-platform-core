# TASK-002.3: Implement Location Model

**Section**: 0. Project Scaffolding & Foundations
**Subsection**: 0.2.3
**Task ID**: TASK-002.3
**Parent Task**: TASK-002

## Description

Implement the `Location` Pydantic model for multi-location restaurant brands. This model represents a single location within a brand, including address, coordinates, phone, hours, and whether it's the primary location.

This supports restaurants with multiple locations (franchises, chains).

## Current State

- Restaurant model exists (from TASK-002.2)
- No Location model exists

**Prerequisites**: TASK-002.2 must be completed (for Coordinates reuse)

## Checklist

### Preparation and Setup

- [ ] Review multi-location restaurant data structures
- [ ] Understand Location vs Restaurant relationship
- [ ] Plan Location model structure

### Implementation Steps

- [ ] Step 1: Implement Location model
  - [ ] Create `Location` class in `models/location.py`
  - [ ] Add fields:
    - [ ] `id: Optional[str]` (location identifier)
    - [ ] `name: str` (required) - location name (e.g. "Downtown Location")
    - [ ] `address: str` (required)
    - [ ] `city: str` (required)
    - [ ] `state: Optional[str]`
    - [ ] `coordinates: Optional[Coordinates]` (reuse from Restaurant)
    - [ ] `phone: Optional[str]`
    - [ ] `hours: Optional[Dict[str, str]]`
    - [ ] `is_primary: bool` (default False)
- [ ] Step 2: Add validation
  - [ ] Validate required fields (name, address, city)
  - [ ] Validate phone format (optional)
  - [ ] Validate coordinates if provided
- [ ] Step 3: Export model
  - [ ] Add `Location` to `models/__init__.py`
  - [ ] Import `Coordinates` from restaurant module if needed

### Specific Requirements

- [ ] Requirement 1: Model supports multi-location brands
  - [ ] Can represent multiple locations
  - [ ] Primary location is identifiable
- [ ] Requirement 2: Validation is appropriate
  - [ ] Required fields are enforced
  - [ ] Optional fields are properly typed

### Error Handling and Edge Cases

- [ ] Handle error case 1: Missing required fields
  - [ ] Clear validation errors
- [ ] Handle edge case 1: Location with no coordinates
  - [ ] Coordinates are optional
- [ ] Handle edge case 2: Multiple primary locations
  - [ ] Validation allows but may warn (or enforce single primary)

### Testing

- [ ] Write unit tests: `tests/test_models_location.py`
  - [ ] Test Location creation with required fields
  - [ ] Test Location creation with all fields
  - [ ] Test is_primary flag
  - [ ] Test validation errors for missing required fields
  - [ ] Test parsing from sample JSON
- [ ] Run full test suite: `pytest tests/test_models_location.py`
- [ ] Verify test coverage: `pytest --cov=restaurant_site_planner.models.location`

### Documentation

- [ ] Add docstrings to Location class
- [ ] Document relationship to Restaurant
- [ ] Add examples

### Verification

- [ ] Verify model works correctly
- [ ] Verify validation works
- [ ] Verify no regressions

## Notes

- This task is part of Phase 3: Owner.com-Aligned Restaurant Sites
- **Execution Timing**: After TASK-002.2
- **Dependencies**: 
  - TASK-002.2: Coordinates class should exist
- **Important Considerations**: 
  - Location is simpler than Restaurant
  - Supports multi-location brands
- **Task Independence**: Can be developed after TASK-002.2

## Related Tasks

- Parent: TASK-002 (Define core domain models)
- Previous: TASK-002.2 (Restaurant model)
- Next: TASK-002.4 (Menu models)
- Dependencies:
  - TASK-002.2

## Definition of Done

### Task Type: CODE/FILE WRITING TASK

**User Stories**:
1. **As a developer**, I want a Location model so I can work with multi-location restaurants
2. **As a developer**, I want location validation so data is correct

**Automated Tests**:
- [ ] Unit tests exist: `tests/test_models_location.py`
- [ ] All tests pass: `pytest tests/test_models_location.py` exits with code 0
- [ ] Tests verify successful parsing of sample JSON
- [ ] Tests verify validation errors for missing required fields
- [ ] Test coverage >= 80%

**Code Quality**:
- [ ] Model has type hints
- [ ] Validation is appropriate
- [ ] Code follows Python style guidelines

**Git & Version Control**:
- [ ] All new files are added to git: `git add .`
- [ ] Changes are committed: `git commit -m "TASK-002.3: Implement Location model"`
- [ ] Code is pushed to origin: `git push origin <branch-name>`
- [ ] Commit message includes task ID: TASK-002.3

**Final Verification**:
- [ ] All checklist items completed
- [ ] All tests pass
- [ ] Model works correctly
- [ ] Code committed and pushed

